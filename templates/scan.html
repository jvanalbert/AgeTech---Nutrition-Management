{% extends "base.html" %}

{% block content %}
<h2>ðŸ“¦ Scan Barcode</h2>

<form method="post">
    <label for="barcode">Barcode:</label>
    <input
        type="text"
        id="barcode"
        name="barcode"
        required
        autofocus
        autocomplete="off"
    >
    <button type="submit">Scan</button>
</form>

{% if message %}
    <p>{{ message }}</p>
{% endif %}

{% if product %}
    <h3>Product Details:</h3>
    <p><strong>Name:</strong> {{ product.name }}</p>
    <p><strong>Brand:</strong> {{ product.brand }}</p>
    <p><strong>Category:</strong> {{ product.category }}</p>
    <p><strong>Scanned At:</strong> {{ scanned_at }}</p>
{% endif %}

<script>
    // Always refocus the barcode field after page reload
    document.addEventListener("DOMContentLoaded", function () {
        const input = document.getElementById("barcode");
        if (input) {
            input.focus();
            input.select();
        }
    });
</script>

{% endblock %}
